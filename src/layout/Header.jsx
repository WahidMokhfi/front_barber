import React, { useState } from "react";
import "./header.css";
import { Link, useNavigate } from "react-router-dom";
import { ToastContainer, toast } from "react-toastify";
import "react-toastify/dist/ReactToastify.css";

const Header = () => {
  const [navbarActive, setNavbarActive] = useState(false);
  const adminToken = localStorage.getItem("adminToken");
  const userToken = localStorage.getItem("userToken");
  const adminName = localStorage.getItem("adminName");
  const userName = localStorage.getItem("userName");
  const navigate = useNavigate();

  const handleMenuClick = () => {
    setNavbarActive(!navbarActive);
  };

  const handleCloseClick = () => {
    setNavbarActive(false);
  };

  const handleDeconnexion = () => {
    if (adminToken) {
      localStorage.removeItem("adminToken");
      localStorage.removeItem("adminName");
      toast.info(`Au revoir, ${adminName} ! À bientôt !`);
    } else if (userToken) {
      localStorage.removeItem("userToken");
      localStorage.removeItem("userName");
      toast.info(`Au revoir, ${userName} ! À bientôt !`);
    }
    navigate("/avis");
  };
  

  return (
    <header className="header">
      <Link to="/" className="logo">
        Barber Bègles
      </Link>

      <div id="menu-burger" className={`fas fa-bars ${navbarActive ? "active" : ""}`} onClick={handleMenuClick}></div>

      <nav className={`navbar ${navbarActive ? "active" : ""}`}>
        <div id="close-navbar" className="fas fa-times" onClick={handleCloseClick}></div>
        <div className="navbar-container">
          <Link className="link-custom" to="/" aria-current="page">
            accueil
          </Link>
          <Link className="link-custom" to="/apropos" aria-current="page">
            À propos
          </Link>
          <Link className="link-custom" to="/services" aria-current="page">
            services
          </Link>
          <Link className="link-custom" to="/avis" aria-current="page">
            avis
          </Link>
          <Link className="link-custom" to="/contact" aria-current="page">
            contact
          </Link>
          {adminToken || userToken ? (
            <button className="link-custom deconnexion-button" onClick={handleDeconnexion}>
              Déconnexion
            </button>
          ) : (
            <Link className="link-custom" to="/connexion" aria-current="page">
              Connexion
            </Link>
          )}
        </div>
      </nav>

      <ToastContainer className="toast-custom" />
    </header>
  );
};

export default Header;




























































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































